---
import ArticleLayout from "../../layouts/ArticleLayout.astro";
import SearchForm from "../../components/SearchForm.astro";
// for SSR
import { getEntry } from "astro:content";
import { formatDate } from "../../utils";
import { Image } from "astro:assets";

const {slug} = Astro.params
if (slug===undefined){
    throw new Error('Slug required')
}
const entry = await getEntry('blog',slug)
if (entry===undefined){
    return Astro.redirect('/404')
}

const { Content } = await entry.render()




// for static site generated

// import { getCollection } from "astro:content";
// import type { CollectionEntry } from "astro:content";

// export async function getStaticPaths(){
//     const allBlogArticles : CollectionEntry<'blog'>[] = await getCollection('blog');
//     return allBlogArticles.map(entry => ({
//         params:{
//             slug:entry.slug,

//         },
//         props:{entry}
//     }))
// }

// const { entry } = Astro.props
    

---

<ArticleLayout title="Όλα τα φυτά">

    <a href="/articles" class="inline-block bg-gray-100 p-2 mb-6 hover:bg-emerald-500 hover:text-white">Πίσω στα Άρθρα</a>
    <article>
      <h1 class="text-2xl md:text-4xl font-bold mb-2"> {entry.data.title}</h1>
      <h3 class="text-md mb-2">Written on {formatDate(entry.data.pubDate)}</h3>
      <div class="flex flex-wrap gap-2 mb-6">
        {entry.data.tags.map((tag:string, index:number)=>(
            <span
            class="px-2 py-1 bg-gray-100 text-black rounded-lg text-xs hover:bg-opacity-20 border-2" 
          ><a href={"/articles/tag/" + tag}>{tag}</a></span>
         ))}
      
      </div>
      <Image src= {'/images/' + entry.data.image} alt="Article Image" class=" w-full rounded-xl mb-6 aspect-auto object-cover" width={1000} height={1000}/>
      <Content/>

    </article>
    <div class="mt-12 max-w-fit">
        <p class="text-xl">Ψαχνεις κατι αλλο;</p>
        <SearchForm />
    </div>
    

    
</ArticleLayout>

<style is:global>
    p{
        margin: 20px 0;
    }
    h2{
        margin: 20px 0;
        font-size:1.8rem;
    }

</style>