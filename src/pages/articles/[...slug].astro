---
import MainLayout from "../../layouts/MainLayout.astro";
// for SSR
import { getEntry } from "astro:content";
import { formatDate } from "../../utils";
import { Image } from "astro:assets";

const {slug} = Astro.params
if (slug===undefined){
    throw new Error('Slug required')
}
const entry = await getEntry('blog',slug)
if (entry===undefined){
    return Astro.redirect('/404')
}

const { Content } = await entry.render()




// for static site generated

// import { getCollection } from "astro:content";
// import type { CollectionEntry } from "astro:content";

// export async function getStaticPaths(){
//     const allBlogArticles : CollectionEntry<'blog'>[] = await getCollection('blog');
//     return allBlogArticles.map(entry => ({
//         params:{
//             slug:entry.slug,

//         },
//         props:{entry}
//     }))
// }

// const { entry } = Astro.props
    

---

<MainLayout title="Όλα τα φυτά">

    <a href="/articles" class="inline-block bg-gray-100 p-2 mb-6 hover:bg-emerald-500 hover:text-white">Πίσω στα Άρθρα</a>
    <article>
      <h1 class="text-4xl font-bold mb-2"> {entry.data.title}</h1>
      <h3 class="text-lg mb-2">Written on {formatDate(entry.data.pubDate)}</h3>
      <div class="flex flex-wrap gap-2 mb-6">
        {entry.data.tags.map((tag:string, index:number)=>(
            <span
          class={index % 2 === 0 ? "px-2 py-1 bg-emerald-500 text-white rounded-full text-xs hover:opacity-90" :"px-2 py-1 bg-indigo-500 text-white rounded-full text-xs hover:opacity-90"}
          ><a href={"/articles/tag/" + tag}>{tag}</a></span>
         ))}
      
      </div>
      <Image src= {'/images/' + entry.data.image} alt="Article Image" class="lg:w-4/5 w-full  rounded-xl mb-6 aspect-video object-cover" width={1000} height={1000}/>
      <Content/>

    </article>
    
</MainLayout>

<style is:global>
    p{
        margin: 20px 0;
    }
    h2{
        margin: 20px 0;
        font-size:1.8rem;
    }

</style>